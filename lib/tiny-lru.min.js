/*
 2018 Jason Mulligan <jason.mulligan@avoidwork.com>
 @version 5.0.0
*/
"use strict";(function(a){function b(a=1e3,b=0){return new d(a,b)}const c=null;class d{constructor(a,b){return this.max=a,this.ttl=b,this.clear()}clear(){const a=[];for(let b=-1;++b<this.max;)a.push(`"s${b+1}"`);return this.first=c,this.last=c,this.registry=new Map,this.slots=JSON.parse(`{${a.map((a)=>`${a}: {"expiry":-1,"next":null,"previous":null,"value":null}`).join(",")}}`),this.empty=Object.keys(this.slots).reverse(),this}delete(a,b=!1){return this.remove(a,b)}evict(){return this.remove(this.last,!0)}get(a){let b;if(!0===this.has(a)){const c=this.slots[this.registry.get(a)];-1===c.expiry||c.expiry>Date.now()?(b=c.value,this.set(a,b,!0)):this.remove(a,!0)}return b}has(a){return this.registry.has(a)}remove(a,b=!1){if(!0===b||this.has(a)){const b=this.registry.get(a),d=this.slots[b];d.previous!==c&&(this.slots[this.registry.get(d.previous)].next=d.next),d.next!==c&&(this.slots[this.registry.get(d.next)].previous=d.previous),this.first===a&&(this.first=d.previous),this.last===a&&(this.last=d.next),d.expiry=-1,d.next=c,d.previous=c,d.value=c,this.registry.delete(a),this.empty.push(b)}return this}set(a,b,d=!1){if(!0===d||!0===this.has(a)){const d=this.slots[this.registry.get(a)];if(d.value=b,this.first!==a){const b=d.next,e=d.previous,g=this.slots[this.registry.get(this.first)];d.next=c,d.previous=this.first,g.next=a,g.previous===a&&(g.previous=c),b!==c&&b!==this.first&&(e!==c&&(this.slots[this.registry.get(e)].next=b),this.slots[this.registry.get(b)].previous=e),this.last===a&&(this.last=b),this.first=a}}else{0===this.empty.length&&this.evict();const d=this.empty.pop(),e=this.slots[d];this.registry.set(a,d),e.expiry=0<this.ttl?new Date().getTime()+this.ttl:-1,e.next=c,e.previous=this.first,e.value=b,this.last===c?this.last=a:this.slots[this.registry.get(this.first)].next=a,this.first=a}return this}}"undefined"==typeof exports?"function"==typeof define&&void 0!==define.amd?define(()=>b):a.lru=b:module.exports=b})("undefined"==typeof window?global:window);
//# sourceMappingURL=tiny-lru.min.js.map