/*
 2019 Jason Mulligan <jason.mulligan@avoidwork.com>
 @version 5.1.3
*/
"use strict";/**
 * Tiny LRU cache for Client or Server
 *
 * @author Jason Mulligan <jason.mulligan@avoidwork.com>
 * @copyright 2019
 * @license BSD-3-Clause
 * @link https://github.com/avoidwork/tiny-lru
 * @version 5.1.3
 */(function(a){function b(a=1e3,b=0){return new d(a,b)}// Node, AMD & window supported
const c=null;class d{constructor(a,b){this.clear(),this.max=a,this.ttl=b}clear(){return this.cache={},this.first=c,this.last=c,this.length=0,this}delete(a,b=!1){if(b||this.has(a)){const b=this.cache[a];delete this.cache[a],this.length--,b.next!==c&&(this.cache[b.next].prev=b.prev),b.prev!==c&&(this.cache[b.prev].next=b.next),this.first===a&&(this.first=b.next),this.last===a&&(this.last=b.prev)}return this}evict(){return 0<this.length&&this.delete(this.last,!0),this}get(a){let b;if(this.has(a)){const c=this.cache[a];-1===c.expiry||c.expiry>Date.now()?(b=c.value,this.set(a,b,!0)):this.delete(a,!0)}return b}has(a){return a in this.cache}keys(){return Object.keys(this.cache)}remove(a,b=!1){return this.delete(a,b)}set(a,b,d=!1){if(d||this.has(a)){const d=this.cache[a];if(d.value=b,this.first!==a){const b=d.prev,e=d.next,g=this.cache[this.first];d.prev=c,d.next=this.first,g.prev=a,b!==c&&(this.cache[b].next=e),e!==c&&(this.cache[e].prev=b),this.last===a&&(this.last=b)}}else this.length===this.max&&this.evict(),this.length++,this.cache[a]={expiry:0<this.ttl?new Date().getTime()+this.ttl:-1,prev:c,next:this.first,value:b},1===this.length?this.last=a:this.cache[this.first].prev=a;return this.first=a,this}}"undefined"==typeof exports?"function"==typeof define&&void 0!==define.amd?define(()=>b):a.lru=b:module.exports=b})("undefined"==typeof window?global:window);
//# sourceMappingURL=tiny-lru.min.js.map